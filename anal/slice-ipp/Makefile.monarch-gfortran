FC=gfortran
FFLAGS=-Waliasing -Wline-truncation -Wsurprising \
       -Wunderflow -Wuninitialized -fimplicit-none \
       -Wconversion -Wunused -Wunreachable-code
XTFLAGS=-Wextra -Wall -fbounds-check -Wunused-label -W
UNFLAGS=-Wimplicit-interface -pedantic
NWFLAGS=-Wampersand -Wcharacter-truncation -Wno-tabs -frange-check
LDFLAGS=
OPTLVL=

TGTDIR=/home/citco2/bin/ipp
LINKDIR=/usr/local/bin
include local.mk
DISTFILES=$(PGM)

$(PGM) : $(SRCS)
	$(FC) -I$(IDIR) -O$(OPTLVL) -o $(PGM) $(FFLAGS) $(LDFLAGS) $(PGM).f

distribution : $(DISTFILES)
	@[ -d $(TGTDIR) ] || mkdir -p $(TGTDIR)
	distribute $(TGTDIR) $(DISTFILES)

links : $(DISTFILES)
	for distfile in $(DISTFILES); do ln -fs $(TGTDIR)/$$distfile $(LINKDIR)/$$distfile; done

clean :
	rm -f $(PGM)

mrproper : clean
	cat .cvsignore | grep -v '^Makefile$$' | xargs rm -f
	rm -f .cvsignore~ *~
